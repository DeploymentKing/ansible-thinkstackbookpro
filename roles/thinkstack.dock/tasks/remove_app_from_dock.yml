---
- name: "{{ item }} : Check if the app is in the dock."
  shell: "dockutil --find '{{ item }}'"
  register: command_output
  failed_when: command_output.stderr != ""

- name: Debug stdout
  debug:
    msg: "{{ command_output.stdout }}"

- name: Debug stderr
  debug:
    msg: "{{ command_output.stderr }}"

- name: "{{ item }} : Add the app to the dock if not found."
  shell: "dockutil --remove '{{ item }}'"
  when: command_output.stdout | search('was found')
